<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="theme-color" content="#0d9488">
  <title>Event Created - Garderobe Digital</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Arial, sans-serif;
      background: linear-gradient(135deg, #0d9488 0%, #0f766e 100%);
      color: #ffffff;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 20px;
      line-height: 1.5;
    }

    .container {
      max-width: 700px;
      width: 100%;
    }

    .card {
      background: #ffffff;
      color: #0f172a;
      border-radius: 12px;
      padding: 48px 40px;
      box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
    }

    .success-header {
      text-align: center;
      margin-bottom: 32px;
    }

    .success-icon {
      width: 64px;
      height: 64px;
      color: #10b981;
      margin: 0 auto 16px;
    }

    h1 {
      font-size: 30px;
      font-weight: 800;
      text-align: center;
      margin-bottom: 8px;
      color: #0f172a;
    }

    .subtitle {
      text-align: center;
      color: #64748b;
      font-size: 14px;
    }

    .url-section {
      margin-bottom: 32px;
    }

    .url-label {
      font-size: 14px;
      font-weight: 600;
      color: #0f172a;
      margin-bottom: 8px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .url-label-icon {
      width: 18px;
      height: 18px;
      color: #0d9488;
    }

    .url-hint {
      font-size: 12px;
      color: #64748b;
      margin-bottom: 10px;
    }

    .url-box {
      position: relative;
      background: #f8fafc;
      border: 1px solid #e2e8f0;
      border-radius: 8px;
      padding: 14px 100px 14px 16px;
      font-family: 'Monaco', 'Courier New', monospace;
      font-size: 13px;
      word-break: break-all;
      color: #0f172a;
      position: relative;
    }

    .copy-button {
      position: absolute;
      right: 8px;
      top: 50%;
      transform: translateY(-50%);
      padding: 8px 16px;
      background: #0d9488;
      color: #ffffff;
      border: none;
      border-radius: 6px;
      font-size: 13px;
      font-weight: 600;
      cursor: pointer;
      transition: background 150ms ease-in-out;
      white-space: nowrap;
      font-family: 'Inter', sans-serif;
    }

    .copy-button:hover {
      background: #0f766e;
    }

    .copy-button:active {
      transform: translateY(-50%) scale(0.95);
    }

    .copy-button.copied {
      background: #10b981;
    }

    .qr-code-container {
      text-align: center;
      margin: 20px 0;
    }

    .qr-code {
      max-width: 200px;
      width: 100%;
      height: auto;
      border: 1px solid #e2e8f0;
      border-radius: 8px;
      padding: 12px;
      background: #ffffff;
    }

    .qr-label {
      font-size: 11px;
      color: #64748b;
      margin-top: 8px;
    }

    .expiry-info {
      background: #fef9c3;
      border: 1px solid #fde047;
      border-radius: 8px;
      padding: 16px;
      margin: 24px 0;
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .expiry-icon {
      width: 24px;
      height: 24px;
      flex-shrink: 0;
      color: #ca8a04;
    }

    .expiry-text {
      flex: 1;
      color: #713f12;
      font-size: 13px;
      font-weight: 600;
    }

    .warning-box {
      background: #fef2f2;
      border: 1px solid #fecaca;
      border-radius: 8px;
      padding: 20px;
      margin: 20px 0;
    }

    .warning-title {
      color: #991b1b;
      font-weight: 700;
      font-size: 14px;
      margin-bottom: 10px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .warning-icon {
      width: 18px;
      height: 18px;
    }

    .warning-text {
      color: #7f1d1d;
      font-size: 13px;
      line-height: 1.6;
    }

    .next-steps {
      background: #eff6ff;
      border: 1px solid #bfdbfe;
      border-radius: 8px;
      padding: 20px;
      margin-top: 24px;
    }

    .next-steps-title {
      color: #1e40af;
      font-weight: 700;
      font-size: 14px;
      margin-bottom: 12px;
    }

    .next-steps-list {
      list-style: none;
      padding: 0;
    }

    .next-steps-list li {
      color: #1e3a8a;
      font-size: 13px;
      margin-bottom: 8px;
      padding-left: 24px;
      position: relative;
      line-height: 1.5;
    }

    .next-steps-list li::before {
      content: "";
      position: absolute;
      left: 6px;
      top: 7px;
      width: 6px;
      height: 6px;
      background: #3b82f6;
      border-radius: 50%;
    }

    .action-buttons {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
      margin-top: 24px;
    }

    .action-button {
      padding: 14px;
      border: none;
      border-radius: 6px;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      transition: background 150ms ease-in-out, transform 150ms ease-in-out;
      text-decoration: none;
      display: block;
      text-align: center;
      font-family: inherit;
    }

    .button-primary {
      background: #0d9488;
      color: #ffffff;
    }

    .button-primary:hover {
      background: #0f766e;
    }

    .button-secondary {
      background: #f1f5f9;
      color: #475569;
    }

    .button-secondary:hover {
      background: #e2e8f0;
    }

    @media (max-width: 640px) {
      .card {
        padding: 32px 24px;
      }

      h1 {
        font-size: 24px;
      }

      .url-box {
        padding: 14px;
        padding-bottom: 60px;
      }

      .copy-button {
        top: auto;
        bottom: 8px;
        left: 8px;
        right: 8px;
        transform: none;
        width: calc(100% - 16px);
      }

      .copy-button:active {
        transform: scale(0.95);
      }

      .action-buttons {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="card">
      <div class="success-header">
        <svg class="success-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
        </svg>
        <h1>Event Created Successfully</h1>
        <div class="subtitle">Your temporary coat check system is ready</div>
      </div>

      <div class="url-section">
        <div class="url-label">
          <svg class="url-label-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
          </svg>
          <span>Staff URL (bookmark on staff phones)</span>
        </div>
        <div class="url-hint">Staff use this to scan QR codes and manage coats</div>
        <div class="url-box">
          <span id="staffUrl"><%= baseUrl %>/e/<%= slug %>/staff?token=<%= staffToken %></span>
          <button class="copy-button" onclick="copyUrl('staffUrl', this)">Copy</button>
        </div>
        <div class="qr-code-container">
          <img src="/api/qr-staff/<%= slug %>?token=<%= staffToken %>" alt="Staff URL QR Code" class="qr-code" id="staffQrCode">
          <div class="qr-label">QR code for staff URL (scan to bookmark)</div>
        </div>
      </div>

      <div class="url-section">
        <div class="url-label">
          <svg class="url-label-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z"></path>
          </svg>
          <span>Guest URL (write to NFC tags)</span>
        </div>
        <div class="url-hint">Guests tap NFC tag with this URL to get their tickets</div>
        <div class="url-box">
          <span id="guestUrl"><%= baseUrl %>/e/<%= slug %>/new</span>
          <button class="copy-button" onclick="copyUrl('guestUrl', this)">Copy</button>
        </div>
        <div class="qr-code-container">
          <img src="/api/qr-event/<%= slug %>" alt="Guest URL QR Code" class="qr-code" id="qrCode">
          <div class="qr-label">QR code for guest URL (for easy NFC programming)</div>
        </div>
      </div>

      <div class="expiry-info">
        <svg class="expiry-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
        </svg>
        <div class="expiry-text">
          Auto-deletes: <%= expiresAt %> (<%= durationHours %>h from now)
        </div>
      </div>

      <div class="warning-box">
        <div class="warning-title">
          <svg class="warning-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path>
          </svg>
          <span>Important - Save These URLs Now</span>
        </div>
        <div class="warning-text">
          We don't send emails or store user accounts. Copy both URLs above and share
          them with your staff. If you lose these URLs, you'll need to create a new event.
        </div>
      </div>

      <div class="next-steps">
        <div class="next-steps-title">Next Steps</div>
        <ul class="next-steps-list">
          <li>Program your NFC tags with the Guest URL</li>
          <li>Send the Staff URL to your coat check team</li>
          <li>Staff should bookmark the Staff URL on their phones</li>
          <li>Test by tapping an NFC tag with your phone</li>
          <li>Verify staff can scan and check in a test ticket</li>
        </ul>
      </div>

      <div class="action-buttons">
        <a href="<%= baseUrl %>/e/<%= slug %>/staff?token=<%= staffToken %>" class="action-button button-primary">
          Open Staff Interface
        </a>
        <a href="/" class="action-button button-secondary">
          Create Another Event
        </a>
      </div>
    </div>
  </div>

  <script>
    function copyUrl(elementId, button) {
      const element = document.getElementById(elementId);
      const text = element.textContent;

      if (navigator.clipboard && navigator.clipboard.writeText) {
        navigator.clipboard.writeText(text).then(() => {
          showCopied(button);
        }).catch(() => {
          fallbackCopy(text, button);
        });
      } else {
        fallbackCopy(text, button);
      }
    }

    function fallbackCopy(text, button) {
      const textarea = document.createElement('textarea');
      textarea.value = text;
      textarea.style.position = 'fixed';
      textarea.style.opacity = '0';
      document.body.appendChild(textarea);
      textarea.select();
      try {
        document.execCommand('copy');
        showCopied(button);
      } catch (err) {
        alert('Failed to copy. Please copy manually.');
      }
      document.body.removeChild(textarea);
    }

    function showCopied(button) {
      const originalText = button.textContent;
      button.textContent = 'Copied!';
      button.classList.add('copied');

      setTimeout(() => {
        button.textContent = originalText;
        button.classList.remove('copied');
      }, 2000);
    }

    // Auto-select URLs on click
    document.querySelectorAll('.url-box span').forEach(element => {
      element.addEventListener('click', function() {
        if (window.getSelection) {
          const selection = window.getSelection();
          const range = document.createRange();
          range.selectNodeContents(this);
          selection.removeAllRanges();
          selection.addRange(range);
        }
      });
    });
  </script>
</body>
</html>
